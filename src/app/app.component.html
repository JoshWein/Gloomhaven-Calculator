<div class="mat-typography" fxLayout="column" fxLayoutGap="10px">
  <div>
    <h1>
      Gloomhaven Pork Calculator
    </h1>
  </div>
  <div fxLayoutGap="10px" fxLayout.xs="column wrap" fxLayout="row">
    <mat-card fxFlex="65" fxFlex.gt-sm="70">
      <mat-table [dataSource]="mainTableDataSource">
        <!-- Card Column -->
        <ng-container matColumnDef="card">
          <mat-header-cell *matHeaderCellDef> Card </mat-header-cell>
          <mat-cell *matCellDef="let cardType"> {{cardType}} </mat-cell>
        </ng-container>
        <!-- Count Column -->
        <ng-container matColumnDef="count">
          <mat-header-cell *matHeaderCellDef> Count </mat-header-cell>
          <mat-cell *matCellDef="let cardType"> {{deck.cards[cardType]}}</mat-cell>
        </ng-container>
        <!-- Percent Column -->
        <ng-container matColumnDef="percent">
          <mat-header-cell *matHeaderCellDef> Percent </mat-header-cell>
          <mat-cell *matCellDef="let cardType">
           {{deck.cardChance(cardType)}}%
         </mat-cell>
        </ng-container>
        <ng-container matColumnDef="percent-bar">
          <mat-header-cell *matHeaderCellDef></mat-header-cell>
          <mat-cell *matCellDef="let cardType">
            <mat-progress-bar mode="determinate" value="{{deck.cardChance(cardType)}}"></mat-progress-bar>
          </mat-cell>
        </ng-container>
        <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
        <mat-row *matRowDef="let row; columns: displayedColumns;"></mat-row>
      </mat-table>
    </mat-card>
    <deck-reliability [deck]="deck" [cards]="deck.cards" fxFlex="35" fxFlex.gt-sm="30"></deck-reliability>
  </div>
  <br/>
  <mat-form-field fxLayout="row" fxLayout.xs="column wrap" fxFlex="50">
    <mat-select placeholder="Select Character" [(ngModel)]="selectedCharacter" (change)="characterChanged()">
      <mat-option *ngFor="let character of characters, let char_i = index" [value]="char_i" >
        {{ character.name }}
      </mat-option>
    </mat-select>
  </mat-form-field>
  <div>
    <h1>{{ characters[selectedCharacter].name }} Perks:</h1>
    <div *ngFor="let perk of characters[selectedCharacter].perkList">
      <div *ngFor="let use of ' '.repeat(perk.uses).split(''), let use_i = index">
        <mat-checkbox (change)="selectPerk($event, perk.set, perk.unset)">
          <b>{{perk.name}}</b>
        </mat-checkbox>
      </div>
    </div>
  </div>
</div>
<router-outlet></router-outlet>